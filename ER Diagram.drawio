<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram id="SmartLandERD" name="ERD">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" tooltips="1" connect="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="2000">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- USER TABLE GROUP -->
        <mxCell id="user_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="240" height="230" as="geometry"/>
        </mxCell>

        <mxCell id="user_header" value="User" parent="user_group"
          style="shape=rectangle;fillColor=#A9D0F5;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="240" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="user_fields" value="user_id (UUID PK)
full_name (VARCHAR)
email (VARCHAR)
ssi_credential (TEXT)
user_type (ENUM)
verification_status (BOOLEAN)
created_at (TIMESTAMP)" parent="user_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#EAF2F8;" vertex="1">
          <mxGeometry x="0" y="30" width="240" height="200" as="geometry"/>
        </mxCell>


        <!-- LAND PARCEL TABLE -->
        <mxCell id="parcel_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="420" y="100" width="260" height="260" as="geometry"/>
        </mxCell>

        <mxCell id="parcel_header" value="Land_Parcel" parent="parcel_group"
          style="shape=rectangle;fillColor=#A9F5BC;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="260" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="parcel_fields" value="parcel_id (UUID PK)
location_address (TEXT)
coordinates (GEOGRAPHY)
area_size (DECIMAL)
boundaries (POLYGON)
status (ENUM)
registration_date (TIMESTAMP)
blockchain_ref (TEXT)" parent="parcel_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#E9FBE7;" vertex="1">
          <mxGeometry x="0" y="30" width="260" height="230" as="geometry"/>
        </mxCell>


        <!-- OWNERSHIP RECORD TABLE -->
        <mxCell id="own_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="300" y="420" width="260" height="220" as="geometry"/>
        </mxCell>

        <mxCell id="own_header" value="Ownership_Record" parent="own_group"
          style="shape=rectangle;fillColor=#E2C7F7;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="260" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="own_fields" value="ownership_id (UUID PK)
user_id (UUID)
parcel_id (UUID)
start_date (TIMESTAMP)
end_date (TIMESTAMP)
ownership_type (ENUM)
blockchain_hash (TEXT)" parent="own_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#F5EAFB;" vertex="1">
          <mxGeometry x="0" y="30" width="260" height="190" as="geometry"/>
        </mxCell>


        <!-- DOCUMENT TABLE -->
        <mxCell id="doc_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="40" y="420" width="240" height="230" as="geometry"/>
        </mxCell>

        <mxCell id="doc_header" value="Document" parent="doc_group"
          style="shape=rectangle;fillColor=#F5B7B1;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="240" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="doc_fields" value="document_id (UUID PK)
parcel_id (UUID)
document_type (ENUM)
document_hash (TEXT)
file_url (TEXT)
upload_date (TIMESTAMP)
validation_status (ENUM)" parent="doc_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#FDEDEC;" vertex="1">
          <mxGeometry x="0" y="30" width="240" height="200" as="geometry"/>
        </mxCell>


        <!-- VALIDATION -->
        <mxCell id="val_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="620" y="420" width="260" height="240" as="geometry"/>
        </mxCell>

        <mxCell id="val_header" value="Validation" parent="val_group"
          style="shape=rectangle;fillColor=#FCF3CF;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="260" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="val_fields" value="validation_id (UUID PK)
parcel_id (UUID)
validator_id (UUID)
validation_type (ENUM)
validation_date (TIMESTAMP)
outcome (ENUM)
notes (TEXT)" parent="val_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#FFF9E6;" vertex="1">
          <mxGeometry x="0" y="30" width="260" height="210" as="geometry"/>
        </mxCell>


        <!-- TRANSACTION -->
        <mxCell id="tx_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="900" y="410" width="280" height="260" as="geometry"/>
        </mxCell>

        <mxCell id="tx_header" value="Transaction" parent="tx_group"
          style="shape=rectangle;fillColor=#FDEBD0;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="280" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="tx_fields" value="transaction_id (UUID PK)
parcel_id (UUID)
seller_id (UUID)
buyer_id (UUID)
transaction_date (TIMESTAMP)
amount (DECIMAL)
status (ENUM)
blockchain_hash (TEXT)" parent="tx_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#FEF9E7;" vertex="1">
          <mxGeometry x="0" y="30" width="280" height="230" as="geometry"/>
        </mxCell>


        <!-- DISPUTE -->
        <mxCell id="dispute_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="1220" y="430" width="280" height="260" as="geometry"/>
        </mxCell>

        <mxCell id="dispute_header" value="Dispute" parent="dispute_group"
          style="shape=rectangle;fillColor=#F5B7B1;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="280" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="dispute_fields" value="dispute_id (UUID PK)
parcel_id (UUID)
reported_by (UUID)
dispute_type (ENUM)
description (TEXT)
status (ENUM)
created_at (TIMESTAMP)
resolved_at (TIMESTAMP)" parent="dispute_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#FDEDEC;" vertex="1">
          <mxGeometry x="0" y="30" width="280" height="230" as="geometry"/>
        </mxCell>


        <!-- BLOCKCHAIN RECORD -->
        <mxCell id="block_group" value="" style="group" vertex="1" parent="1">
          <mxGeometry x="950" y="760" width="260" height="240" as="geometry"/>
        </mxCell>

        <mxCell id="block_header" value="Blockchain_Record" parent="block_group"
          style="shape=rectangle;fillColor=#D5F5E3;align=center;fontStyle=1;" vertex="1">
          <mxGeometry x="0" y="0" width="260" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="block_fields" value="record_id (UUID PK)
block_hash (TEXT)
transaction_hash (TEXT)
block_number (BIGINT)
timestamp (TIMESTAMP)
data_payload (JSONB)
gas_used (BIGINT)" parent="block_group"
          style="shape=rectangle;whiteSpace=wrap;align=left;spacingLeft=8;fillColor=#E8F8F5;" vertex="1">
          <mxGeometry x="0" y="30" width="260" height="210" as="geometry"/>
        </mxCell>


        <!-- RELATIONSHIPS -->
        <mxCell edge="1" source="user_group" target="own_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell edge="1" source="parcel_group" target="own_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell edge="1" source="parcel_group" target="doc_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell edge="1" source="parcel_group" target="val_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell edge="1" source="user_group" target="val_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell edge="1" source="parcel_group" target="tx_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell edge="1" source="user_group" target="tx_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell edge="1" source="parcel_group" target="dispute_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell edge="1" source="user_group" target="dispute_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell edge="1" source="tx_group" target="block_group" style="endArrow=block;strokeColor=#333;"><mxGeometry relative="1" as="geometry"/></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

